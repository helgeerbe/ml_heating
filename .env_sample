# ML Heating configuration Sample
# Copy this file to .env and set your actual values.
# Keep tokens and sensitive information secret; do NOT commit your .env file to version control.

# --- Home Assistant ---
# Base URL of your Home Assistant instance (e.g., http://homeassistant.local:8123)
HASS_URL=https://home-assistant.example.com

# A Long-Lived Access Token from your Home Assistant profile page.
HASS_TOKEN=YOUR_HOME_ASSISTANT_TOKEN

# --- InfluxDB ---
# URL of your InfluxDB instance, including the protocol and port.
INFLUX_URL=https://influxdb.example.com:8086

# An InfluxDB API token with read access to the specified bucket.
INFLUX_TOKEN=YOUR_INFLUXDB_TOKEN

# The InfluxDB organization and bucket where your Home Assistant data is stored.
INFLUX_ORG=your-org
INFLUX_BUCKET=home_assistant/autogen

# --- Model and State ---
# Absolute path to store the trained machine learning model file.
MODEL_FILE=/opt/ml_heating/ml_model.pkl

# Absolute path to store the last state (features) for online learning.
STATE_FILE=/opt/ml_heating/ml_state.pkl

# --- Script Behavior ---
# Number of historical 10-minute steps to use as features for the model.
# Example: 6 means 6 * 10min = 1 hour of history.
HISTORY_STEPS=6

# The target indoor temperature (Â°C) the model should aim for.
TARGET_INDOOR_TEMP=21.5

# --- Home Assistant Entity IDs ---
# These must match the entity IDs in your Home Assistant instance.

# The primary indoor temperature sensor.
INDOOR_TEMP_ENTITY_ID=sensor.your_indoor_temp_sensor

# The heat pump's outlet temperature sensor.
ACTUAL_OUTLET_TEMP_ENTITY_ID=sensor.your_hp_outlet_temp

# A binary sensor that is 'on' when Domestic Hot Water (DHW) is being heated.
DHW_STATUS_ENTITY_ID=binary_sensor.your_dhw_status_sensor

# A sensor or helper (e.g., input_boolean) that indicates if a TV or other significant heat source is on.
TV_STATUS_ENTITY_ID=input_boolean.your_tv_status

# The outdoor temperature sensor, preferably compensated or near the heat pump.
OUTDOOR_TEMP_ENTITY_ID=sensor.your_outdoor_temp_sensor

# The climate entity for your heating system, used to check if it's in the 'heat' state.
HEATING_STATUS_ENTITY_ID=climate.your_heating_entity

# --- PV (Solar) Power Entity IDs ---
# These are used to measure current solar power generation. Add or remove as needed.
PV1_POWER_ENTITY_ID=sensor.your_pv1_power_sensor
PV2_POWER_ENTITY_ID=sensor.your_pv2_power_sensor
PV3_POWER_ENTITY_ID=sensor.your_pv3_power_sensor


# --- Debugging ---
# Set to "1" to enable detailed logging of feature vectors and model decisions.
# Set to "0" or remove for normal operation.
DEBUG=0
